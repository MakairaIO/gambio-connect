"use strict";function debounce(e,n,t){var a;return function(){var o=this,r=arguments,s=function(){a=null,t||e.apply(o,r)},i=t&&!a;clearTimeout(a),a=setTimeout(s,n),i&&e.apply(o,r)}}var searchFormClass="makaira-autosuggestion__form",searchInputId="searchParam",searchSubmitBtnClass="makaira-autosuggestion__submit",flyoutContainerClass="makaira-autosuggestion",searchForm=document.querySelector("."+searchFormClass),searchInput=document.getElementById(searchInputId),searchSubmitBtn=document.querySelector("."+searchSubmitBtnClass),flyoutContainer=document.querySelector("."+flyoutContainerClass),enableLoading=function(){searchForm.classList.add("search-loading")},disableLoading=function(){searchForm.classList.remove("search-loading")},renderAutosuggestion=function(e){var n=flyoutContainer;if(!n){var t=document.createElement("div");t.className=flyoutContainerClass,searchForm.appendChild(n),n=t}n.innerHTML=e,n.classList.add("open"),disableLoading()},fetchAutosuggestion=debounce((function(e){var n=e.target.value.trim();if(n.length>2){enableLoading();var t=searchForm.action;t+=t.includes("?")?"&":"?",fetch(t+"keyword="+encodeURIComponent(n)).then((function(e){return e.text()})).then((function(e){return renderAutosuggestion(e,searchForm)})).catch((function(e){return console.error("Processing in Makaira failed",e)})).finally((function(){return disableLoading()}))}}),300),closeAutosuggestion=function(e){var n=e.target;if(flyoutContainer){var t=n.id!==searchInputId,a=!n.classList.contains(searchSubmitBtnClass);t&&a&&(flyoutContainer.classList.remove("open"),flyoutContainer.innerHTML="")}};searchInput&&(searchInput.addEventListener("input",fetchAutosuggestion),document.body.addEventListener("click",closeAutosuggestion));